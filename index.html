<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Koshka Client v1.2</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;900&display=swap" rel="stylesheet">

    <style>
        :root {
            --bg-dark: #0f1115;
            --bg-panel: #181c23;
            --primary: #0090ff; 
            --text-main: #ffffff;
            --text-dim: #a0a8b5;
            --border-color: rgba(255, 255, 255, 0.08);
            --radius: 6px;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Montserrat', sans-serif; scroll-behavior: smooth; }
        body { background-color: var(--bg-dark); color: var(--text-main); line-height: 1.5; overflow-x: hidden; }
        #snow-canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; pointer-events: none; opacity: 0.25; }

        /* НАВИГАЦИЯ */
        nav {
            display: flex; justify-content: space-between; align-items: center;
            padding: 15px 8%; position: fixed; width: 100%; top: 0; z-index: 1000;
            background: #0f1115; border-bottom: 1px solid var(--border-color);
        }
        
        .logo { font-size: 1.2rem; font-weight: 900; display: flex; align-items: center; gap: 5px; }
        .logo span { color: var(--primary); }
        
        .version-tag { 
            background: #2a2e35; color: #fff; padding: 2px 10px; border-radius: 4px; 
            font-size: 0.7rem; border: 1px solid rgba(255,255,255,0.2);
            font-weight: 700; margin-left: 15px; display: inline-flex; align-items: center;
        }

        .lang-switcher { display: flex; gap: 10px; }
        .lang-btn { 
            background: none; border: 1px solid var(--border-color); color: var(--text-dim);
            padding: 4px 10px; border-radius: 4px; cursor: pointer; font-size: 0.75rem; font-weight: 700;
            transition: 0.2s;
        }
        .lang-btn.active { border-color: var(--primary); color: white; background: rgba(0, 144, 255, 0.1); }

        /* HERO */
        .hero { min-height: 60vh; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; padding: 120px 20px 60px; }
        .hero h1 { font-size: clamp(2.2rem, 8vw, 4.5rem); font-weight: 900; text-transform: uppercase; margin-bottom: 15px; }
        .hero p { color: var(--text-dim); max-width: 650px; margin-bottom: 35px; font-size: 1rem; }

        /* СКАЧАТЬ */
        .download-box { position: relative; width: 100%; max-width: 400px; }
        .btn-main {
            width: 100%; padding: 18px; background: var(--primary); color: white; border: none; 
            border-radius: var(--radius); font-weight: 800; cursor: pointer; display: flex; 
            align-items: center; justify-content: center; gap: 10px; box-shadow: 0 4px 0px #005fa3;
            text-transform: uppercase;
        }
        .btn-main:active { transform: translateY(2px); box-shadow: 0 2px 0px #005fa3; }
        
        .dl-dropdown {
            position: absolute; top: calc(100% + 10px); left: 50%; transform: translateX(-50%); 
            width: 100%; min-width: 320px; background: var(--bg-panel); 
            border: 1px solid var(--border-color); border-radius: var(--radius); 
            display: none; z-index: 100; box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            overflow: hidden;
        }
        .dl-dropdown.active { display: block; }
        
        .dl-section-title {
            background: rgba(255,255,255,0.03); padding: 10px 15px; font-size: 0.7rem;
            text-transform: uppercase; color: var(--primary); font-weight: 800;
            border-bottom: 1px solid var(--border-color);
        }

        .dl-item { 
            display: flex; justify-content: space-between; align-items: center;
            padding: 12px 15px; color: #fff; text-decoration: none; 
            border-bottom: 1px solid var(--border-color); font-size: 0.85rem; 
            transition: 0.2s;
        }
        .dl-item:hover { background: rgba(255,255,255,0.05); color: var(--primary); }
        .dl-item span { font-size: 0.7rem; opacity: 0.6; font-weight: 400; }
        .dl-item b { font-weight: 700; }

        /* СЕКЦИИ */
        section { padding: 40px 8%; max-width: 1200px; margin: 0 auto; }
        .section-title { font-size: 1.8rem; text-align: center; margin-bottom: 40px; font-weight: 900; text-transform: uppercase; letter-spacing: 1px; }
        .section-title span { color: var(--primary); }
        
        /* ФУНКЦИИ КАРТОЧКИ */
        .features-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 15px; }
        .feature-card {
            background: var(--bg-panel); padding: 30px 20px; border-radius: var(--radius);
            border: 1px solid var(--border-color); display: flex; flex-direction: column;
        }
        .feature-card h3 { margin-bottom: 10px; font-size: 1.2rem; color: var(--primary); }
        .feature-card p { color: var(--text-dim); font-size: 0.85rem; margin-bottom: 20px; flex-grow: 1; }

        .btn-view {
            background: rgba(255,255,255,0.03); color: #fff; border: 1px solid var(--border-color);
            padding: 10px; border-radius: 4px; cursor: pointer; font-weight: 700; font-size: 0.7rem;
            text-transform: uppercase; transition: 0.2s; display: flex; align-items: center; justify-content: center; gap: 6px;
        }
        .btn-view:hover { background: var(--primary); }

        /* ПОЛНЫЙ СПИСОК */
        .all-features-list {
            background: var(--bg-panel); border: 1px solid var(--border-color);
            border-radius: var(--radius); padding: 30px;
            display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: 10px;
        }
        .feature-item { color: var(--text-dim); font-size: 0.8rem; font-weight: 600; display: flex; align-items: center; gap: 8px; }
        .feature-item::before { content: "•"; color: var(--primary); }

        /* CHANGELOG */
        .changelog-container { display: flex; flex-direction: column; gap: 20px; }
        .changelog-card { background: var(--bg-panel); border: 1px solid var(--border-color); border-radius: var(--radius); padding: 25px; }
        .changelog-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; border-bottom: 1px solid var(--border-color); padding-bottom: 10px; }
        .changelog-version { font-weight: 900; color: var(--primary); font-size: 1.2rem; text-transform: uppercase; }
        .changelog-list { list-style: none; }
        .changelog-list li { color: var(--text-dim); font-size: 0.85rem; margin-bottom: 6px; padding-left: 18px; position: relative; line-height: 1.4; }
        .changelog-list li::before { content: "→"; position: absolute; left: 0; color: var(--primary); font-weight: bold; }

        /* МОДАЛКА */
        .modal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.95); display: none; align-items: center; justify-content: center;
            z-index: 2000; padding: 10px;
        }
        .modal.active { display: flex; }
        .modal-content { max-width: 98%; max-height: 90vh; border: 1px solid var(--border-color); }
        .close-modal { position: absolute; top: 20px; right: 20px; color: white; font-size: 2rem; cursor: pointer; }

        footer { padding: 40px 20px; text-align: center; border-top: 1px solid var(--border-color); background: #0d1014; }
        .tg-link { display: inline-flex; align-items: center; gap: 10px; background: #24A1DE; color: white; padding: 12px 25px; border-radius: 4px; text-decoration: none; font-weight: 800; font-size: 0.9rem; }

        @media (max-width: 768px) {
            nav { padding: 10px 5%; }
            .hero h1 { font-size: 2.2rem; }
            .all-features-list { grid-template-columns: 1fr; padding: 15px; }
        }
    </style>
</head>
<body>

    <canvas id="snow-canvas"></canvas>

    <div class="modal" id="imgModal" onclick="closeModal()">
        <span class="close-modal">&times;</span>
        <img src="" class="modal-content" id="modalImg">
    </div>

    <nav>
        <div class="logo">
            <span>KOSHKA</span> CLIENT <div class="version-tag">1.2</div>
        </div>
        <div class="lang-switcher">
            <button class="lang-btn" onclick="setLang('ru')" id="lang-ru">RU</button>
            <button class="lang-btn" onclick="setLang('en')" id="lang-en">EN</button>
        </div>
    </nav>

    <header class="hero">
        <h1 id="hero-title">KOSHKA CLIENT</h1>
        <p id="hero-desc">Продвинутый клиент для DDNet с уникальными возможностями и высокой производительностью.</p>
        
        <div class="download-box">
            <button class="btn-main" onclick="toggleDl(event)" id="btn-dl-main">
                <i class="fas fa-download"></i> СКАЧАТЬ КЛИЕНТ
            </button>
            <div class="dl-dropdown" id="dlMenu">
                <!-- Группа 1: Полный клиент -->
                <div class="dl-section-title" id="title-full-client">Полный клиент (Архив)</div>
                <a href="https://drive.google.com/file/d/1uXuWtq45vFntfZhhlmnwI7HpUWBHCS-L/view?usp=drive_link" class="dl-item" target="_blank">
                    <b>Windows x64</b> <span id="rec-text">(Рекомендуется)</span>
                </a>
                <a href="https://drive.google.com/file/d/1iwJTBfjhcATQQLYoQFtBAeBpvvCUsVDN/view?usp=drive_link" class="dl-item" target="_blank">
                    <b>Windows x86</b> <span id="oldpc-text">(Для старых ПК)</span>
                </a>
                <a href="https://drive.google.com/file/d/1Vy9SmbgwoH-0fvh4bpVyazZbJtt066IF/view?usp=drive_link" class="dl-item" target="_blank">
                    <b>Linux</b> <span>(Full Archive)</span>
                </a>

                <!-- Группа 2: Только EXE -->
                <div class="dl-section-title" id="title-only-exe">Только исполняемый файл</div>
                <a href="https://drive.google.com/file/d/1W8IKxrt8jrAcUwcjlLAndRhz2cIiHUpO/view?usp=drive_link" class="dl-item" target="_blank">
                    <b>Windows x64</b> <span>(.exe)</span>
                </a>
                <a href="https://drive.google.com/file/d/14fMRWKpeNwyM7Vw3CPbiLoa_Z54Cs6NF/view?usp=drive_link" class="dl-item" target="_blank">
                    <b>Windows x86</b> <span>(.exe)</span>
                </a>
                <a href="https://drive.google.com/file/d/1Fr884LlSJ-HrzGF59nLFk4sW9LVfhOUg/view?usp=drive_link" class="dl-item" target="_blank">
                    <b>Linux</b> <span>(Binary)</span>
                </a>
            </div>
        </div>
    </header>

    <section>
        <h2 class="section-title" id="main-features-title">ОСНОВНЫЕ <span>ФУНКЦИИ</span></h2>
        <div class="features-grid">
            <div class="feature-card">
                <h3 id="f1-t">Floating Islet</h3>
                <p id="f1-d">Интерактивный медиа-остров для управления музыкой прямо в игре без сворачивания окон.</p>
                <button class="btn-view" onclick="openModal('Floating Islet.jpg')" data-view-text>Скриншот</button>
            </div>
            <div class="feature-card">
                <h3 id="f2-t">Winter Vibe</h3>
                <p id="f2-d">Зимняя атмосфера: динамический снегопад и праздничное оформление главного меню.</p>
                <button class="btn-view" onclick="openModal('Winter Vibe.jpg')" data-view-text>Скриншот</button>
            </div>
            <div class="feature-card">
                <h3 id="f3-t">Custom Background</h3>
                <p id="f3-d">Полная свобода кастомизации фона: устанавливайте любые PNG изображения мгновенно.</p>
                <button class="btn-view" onclick="openModal('Custom Background.jpg')" data-view-text>Скриншот</button>
            </div>
        </div>
    </section>

    <section>
        <h2 class="section-title" id="all-features-title">ПОЛНЫЙ СПИСОК <span>ФУНКЦИЙ</span></h2>
        <div class="all-features-list" id="all-features-container">
            <!-- Список функций из JS -->
        </div>
    </section>

    <section>
        <h2 class="section-title" id="changelog-title">CHANGELOG <span>ИЗМЕНЕНИЙ</span></h2>
        <div class="changelog-container" id="changelog-content">
            <!-- История изменений из JS -->
        </div>
    </section>

    <footer>
        <a href="https://t.me/KoshkaClientF" class="tg-link" target="_blank" id="tg-text">
            <i class="fab fa-telegram"></i> КАНАЛ В TELEGRAM
        </a>
        <p style="color: var(--text-dim); font-size: 0.75rem; margin-top: 20px;">&copy; 2025 Koshka Client. Version 1.2</p>
    </footer>

    <script>
        const translations = {
            ru: {
                "hero-title": "KOSHKA CLIENT",
                "hero-desc": "Высокопроизводительный клиент для DDNet с акцентом на уникальные визуальные и технические решения.",
                "btn-dl-main": "<i class='fas fa-download'></i> СКАЧАТЬ КЛИЕНТ",
                "rec-text": "(Рекомендуется)",
                "oldpc-text": "(Для старых ПК)",
                "title-full-client": "Полный клиент (Архив)",
                "title-only-exe": "Только исполняемый файл",
                "main-features-title": "ОСНОВНЫЕ <span>ФУНКЦИИ</span>",
                "all-features-title": "ПОЛНЫЙ СПИСОК <span>ФУНКЦИЙ</span>",
                "changelog-title": "ИСТОРИЯ <span>ИЗМЕНЕНИЙ</span>",
                "f1-t": "Floating Islet",
                "f1-d": "Интерактивный медиа-остров для управления музыкой прямо в игре без сворачивания окон.",
                "f2-t": "Winter Vibe",
                "f2-d": "Зимняя атмосфера: динамический снегопад и праздничное оформление главного меню.",
                "f3-t": "Custom Background",
                "f3-d": "Полная свобода кастомизации фона: устанавливайте любые PNG изображения мгновенно.",
                "tg-text": "<i class='fab fa-telegram'></i> КАНАЛ В TELEGRAM",
                "view-btn": "Скриншот",
                "features_list": [
                    "Kill On Freeze", "Hide Chat Bubble", "Custom Backgrounds", "AFK Mode", 
                    "Fast Inputs", "Autoresponder", "Auto Team", "Auto Dummy Connect", 
                    "Floating Islet", "Rainbow Tee", "Rainbow Weapons", "Rainbow Hook", 
                    "Smooth Camera", "Outlines", "Show Katana In Freeze", "Show Stars In Freeze", 
                    "KeyStrokes", "Trail", "Pet System", "Show Sight When Spec", "Vignette", 
                    "Fake CTF Flags", "Winter Vibe", "WarList", "Profiles", 
                    "Show Last Player Left", "Discord RPC", "Show Dummy Position", 
                    "Do Not Repeat Weapons", "Custom Neon Lasers", "Show Milliseconds In Timer", "Chat Bubble"
                ],
                "changelog_data": [
                    {
                        ver: "Версия 1.2",
                        list: [
                            "Исправлено большое количество багов для повышения стабильности.",
                            "Добавлена функция 'Show when the last player is left': визуальное уведомление в HUD, когда вы остались последним незамороженным игроком.",
                            "Интеграция Discord RPC: отображение вашей игровой активности и использования Koshka Client в профиле Discord.",
                            "Добавлена функция 'Show Dummy Position': отображение точного местоположения вашего дамми в интерфейсе.",
                            "Добавлена опция 'Do Not Repeat Weapons': предотвращает дублирование оружия при повторе движений дамми.",
                            "Внедрена система 'Custom Neon Lasers': улучшенное визуальное отображение лазеров для Shotgun и Laser.",
                            "Обновлен таймер: добавлена функция 'Show Milliseconds In Timer' для точного отображения времени.",
                            "Добавлена функция 'Chat Bubble': отображение текстовых сообщений от игроков непосредственно над их персонажами.",
                            "Проведено масштабное обновление и оптимизация системы профилей."
                        ]
                    },
                    {
                        ver: "Версия 1.1",
                        list: [
                            "Исправлены обнаруженные технические ошибки и недоработки.",
                            "Проведено обновление и улучшение системы автоответчика.",
                            "Добавлена функция 'AFK Mode': визуальное отображение режима отсутствия (только для пользователя).",
                            "Добавлена функция 'Show Katana In Freeze': отображение катаны у игроков, находящихся в заморозке.",
                            "Добавлена функция 'Show Stars In Freeze': визуальный эффект вылетающих звезд у замороженных игроков.",
                            "Внедрена система 'Winter Vibe': добавлена полноценная зимняя атмосфера в меню игры."
                        ]
                    },
                    {
                        ver: "Версия 1.0 (Релиз)",
                        list: [
                            "Добавлена эксклюзивная вкладка настроек 'Koshka' для управления всеми функциями клиента.",
                            "Реализованы под-вкладки для удобной навигации: Settings, Visuals, WarList, Profiles, Info.",
                            "Добавлена функция 'Kill On Freeze': автоматический суицид при заморозке персонажа.",
                            "Добавлена функция 'Hide Chat Bubble': скрытие пузыря чата над игроком при вводе сообщения.",
                            "Реализована система 'Custom Backgrounds': возможность мгновенной смены фона меню и игры через PNG файлы.",
                            "Добавлена функция 'Fast Inputs': оптимизация и ускорение обработки ввода на сервер.",
                            "Внедрена интеллектуальная система автоответчика.",
                            "Добавлена функция 'Auto Team': автоматический вход в выбранную команду при подключении к серверу.",
                            "Добавлена функция 'Auto Dummy Connect': автоматическое подключение дамми при входе.",
                            "Реализована функция 'Floating Islet': интерактивный HUD-элемент для управления музыкой.",
                            "Добавлены Rainbow-эффекты для персонажа (Tee), оружия и хука.",
                            "Добавлена функция 'Smooth Camera': плавное следование камеры за персонажем.",
                            "Внедрена система 'Outlines': отрисовка контуров вокруг выбранных игровых тайлов.",
                            "Добавлен HUD-элемент 'KeyStrokes': отображение нажимаемых клавиш в реальном времени.",
                            "Добавлена функция 'Trail': отрисовка декоративного шлейфа за персонажем.",
                            "Добавлена система 'Pet': визуальный спутник, следующий за вашим персонажем.",
                            "Добавлена функция 'Show Sight When Spec': отображение прицела в режиме наблюдения.",
                            "Добавлен визуальный эффект 'Vignette' (Виньетка).",
                            "Добавлена функция 'Fake CTF Flags': возможность выбора и отображения любого флага команды.",
                            "Реализована комплексная система 'WarList': управление списком врагов, союзников и мутов.",
                            "Внедрена система профилей для быстрого переключения между конфигурациями настроек.",
                            "Добавлено интерактивное управление элементами HUD с помощью курсора при открытом чате.",
                            "Реализовано контекстное меню для своего персонажа (настройка Rainbow).",
                            "Реализовано контекстное меню для других игроков: быстрое сохранение профиля, добавление в WarList или мут."
                        ]
                    }
                ]
            },
            en: {
                "hero-title": "KOSHKA CLIENT",
                "hero-desc": "High-performance DDNet client focusing on unique visual and technical solutions.",
                "btn-dl-main": "<i class='fas fa-download'></i> DOWNLOAD CLIENT",
                "rec-text": "(Recommended)",
                "oldpc-text": "(For old PCs)",
                "title-full-client": "Full Client (Archive)",
                "title-only-exe": "Executable Only",
                "main-features-title": "MAIN <span>FEATURES</span>",
                "all-features-title": "FULL <span>FEATURE LIST</span>",
                "changelog-title": "CLIENT <span>CHANGELOG</span>",
                "f1-t": "Floating Islet",
                "f1-d": "Interactive media islet to control music right in the game without alt-tabbing.",
                "f2-t": "Winter Vibe",
                "f2-d": "Winter atmosphere: dynamic snowfall and festive main menu design.",
                "f3-t": "Custom Background",
                "f3-d": "Complete background customization: set any PNG images instantly.",
                "tg-text": "<i class='fab fa-telegram'></i> TELEGRAM CHANNEL",
                "view-btn": "Screenshot",
                "features_list": [
                    "Kill On Freeze", "Hide Chat Bubble", "Custom Backgrounds", "AFK Mode", 
                    "Fast Inputs", "Autoresponder", "Auto Team", "Auto Dummy Connect", 
                    "Floating Islet", "Rainbow Tee", "Rainbow Weapons", "Rainbow Hook", 
                    "Smooth Camera", "Outlines", "Show Katana In Freeze", "Show Stars In Freeze", 
                    "KeyStrokes", "Trail", "Pet System", "Show Sight When Spec", "Vignette", 
                    "Fake CTF Flags", "Winter Vibe", "WarList", "Profiles", 
                    "Show Last Player Left", "Discord RPC", "Show Dummy Position", 
                    "Do Not Repeat Weapons", "Custom Neon Lasers", "Show Milliseconds In Timer", "Chat Bubble"
                ],
                "changelog_data": [
                    {
                        ver: "Version 1.2",
                        list: [
                            "Fixed a large number of bugs for better stability.",
                            "Added 'Show when the last player is left': HUD notification when you are the last unfrozen player.",
                            "Discord RPC Integration: displays your game activity and client usage in Discord.",
                            "Added 'Show Dummy Position': shows the exact location of your dummy in the UI.",
                            "Added 'Do Not Repeat Weapons' option: prevents weapon duplication during dummy input playback.",
                            "Implemented 'Custom Neon Lasers': enhanced visual laser effects for Shotgun and Laser.",
                            "Updated Timer: added 'Show Milliseconds In Timer' for precise time tracking.",
                            "Added 'Chat Bubble': displays player messages directly above their characters.",
                            "Major update and optimization of the Profile system."
                        ]
                    },
                    {
                        ver: "Version 1.1",
                        list: [
                            "Fixed technical bugs and minor issues.",
                            "Updated and improved the Autoresponder system.",
                            "Added 'AFK Mode': visual AFK status (client-side only).",
                            "Added 'Show Katana In Freeze': shows a katana on frozen players.",
                            "Added 'Show Stars In Freeze': star particles effect for frozen players.",
                            "Implemented 'Winter Vibe': added a full winter atmosphere to the main menu."
                        ]
                    },
                    {
                        ver: "Version 1.0 (Release)",
                        list: [
                            "Added exclusive 'Koshka' settings tab for client feature management.",
                            "Implemented sub-tabs for easy navigation: Settings, Visuals, WarList, Profiles, Info.",
                            "Added 'Kill On Freeze': automatic suicide when the character is frozen.",
                            "Added 'Hide Chat Bubble': hides the chat bubble above the player while typing.",
                            "Implemented 'Custom Backgrounds': instant menu and game background changes via PNG files.",
                            "Added 'Fast Inputs': optimized and faster input processing for the server.",
                            "Implemented an intelligent Autoresponder system.",
                            "Added 'Auto Team': automatically join a selected team when connecting.",
                            "Added 'Auto Dummy Connect': automatically connects the dummy upon joining.",
                            "Implemented 'Floating Islet': an interactive HUD element for music control.",
                            "Added Rainbow effects for Tee, Weapons, and Hook.",
                            "Added 'Smooth Camera': smooth camera following the character.",
                            "Implemented 'Outlines' system: draws outlines around selected map tiles.",
                            "Added 'KeyStrokes' HUD: real-time display of pressed keys.",
                            "Added 'Trail' function: draws a decorative trail behind the character.",
                            "Added 'Pet' system: a visual companion following your character.",
                            "Added 'Show Sight When Spec': displays the crosshair in spectator mode.",
                            "Added 'Vignette' visual effect.",
                            "Added 'Fake CTF Flags': ability to choose and display any team flag.",
                            "Implemented comprehensive 'WarList' system: manage enemies, team, and mutes.",
                            "Implemented Profile system for quick switching between configurations.",
                            "Added interactive HUD control using the cursor when chat is open.",
                            "Implemented context menu for own Tee (Rainbow settings).",
                            "Implemented context menu for other players: save profile, add to WarList, or mute."
                        ]
                    }
                ]
            }
        };

        function setLang(lang) {
            localStorage.setItem('lang', lang);
            document.getElementById('lang-ru').classList.toggle('active', lang === 'ru');
            document.getElementById('lang-en').classList.toggle('active', lang === 'en');
            
            // Основной текст
            for (let key in translations[lang]) {
                const el = document.getElementById(key);
                if (el && typeof translations[lang][key] === 'string') {
                    el.innerHTML = translations[lang][key];
                }
            }

            // Рендер функций
            const featuresContainer = document.getElementById('all-features-container');
            featuresContainer.innerHTML = translations[lang].features_list
                .map(item => `<div class="feature-item">${item}</div>`).join('');

            // Рендер Changelog
            const changelogContainer = document.getElementById('changelog-content');
            changelogContainer.innerHTML = translations[lang].changelog_data.map(version => `
                <div class="changelog-card">
                    <div class="changelog-header">
                        <div class="changelog-version">${version.ver}</div>
                    </div>
                    <ul class="changelog-list">
                        ${version.list.map(li => `<li>${li}</li>`).join('')}
                    </ul>
                </div>
            `).join('');

            document.querySelectorAll('[data-view-text]').forEach(btn => {
                btn.innerHTML = `<i class='fas fa-image'></i> ${translations[lang]['view-btn']}`;
            });
        }

        const savedLang = localStorage.getItem('lang');
        const userLang = navigator.language.substring(0, 2);
        const finalLang = savedLang || (translations[userLang] ? userLang : 'en');
        setLang(finalLang);

        function toggleDl(e) {
            e.stopPropagation();
            document.getElementById('dlMenu').classList.toggle('active');
        }
        
        document.addEventListener('click', () => {
            document.getElementById('dlMenu').classList.remove('active');
        });

        function openModal(src) {
            const modal = document.getElementById('imgModal');
            const img = document.getElementById('modalImg');
            img.src = src;
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeModal() {
            document.getElementById('imgModal').classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        // Снег
        const canvas = document.getElementById('snow-canvas');
        const ctx = canvas.getContext('2d');
        let w, h, flakes = [];

        function init() {
            w = window.innerWidth; h = window.innerHeight;
            canvas.width = w; canvas.height = h;
            const count = w < 768 ? 20 : 60;
            flakes = [];
            for(let i=0; i<count; i++) {
                flakes.push({ x: Math.random() * w, y: Math.random() * h, s: Math.random() * 2 + 1, v: Math.random() * 0.5 + 0.2 });
            }
        }

        function draw() {
            ctx.clearRect(0, 0, w, h);
            ctx.fillStyle = "rgba(255, 255, 255, 0.3)";
            ctx.beginPath();
            for(let f of flakes) {
                ctx.moveTo(f.x, f.y);
                ctx.arc(f.x, f.y, f.s, 0, Math.PI*2);
                f.y += f.v;
                if(f.y > h) f.y = -5;
            }
            ctx.fill();
            requestAnimationFrame(draw);
        }

        window.addEventListener('resize', init);
        init(); draw();
    </script>
</body>
</html>
